Redis分布式锁
============
为了解决分布式服务对共享资源的使用冲突问题。  

方案一
-----------
在Redis中存储锁对应的key和value。在使用的时候获取查询锁对应的value存在不存在就行。  
问题 锁释放时可能服务器宕机导致锁无法被释放。
  
方案二
------------
设置锁的过期时间  
使用Redis的SET my_key my_value NX PX milliseconds
NX表示只有当锁不存在的时候才会设置key的值，PX表示设置键key的国企时间，单位是毫秒。
问题 业务过程执行时长大于锁过期时间锁被自动释放掉了，导致第二个获取到锁被错误释放。
  
方案三  
------------
将锁的值设置为随机值，在释放锁的时候对比值是否一致，不一致代表这个锁被其他锁重新获取了。
问题 获取锁到释放锁的过程中不是原子性的  这样也有可能导致锁被错误释放

方案四
------------
 使用LUA脚本释放锁可以保证原子性。
